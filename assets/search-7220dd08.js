import{_ as B,a as A,b as N}from"./EditTable-85ad9dfd.js";import{_ as T,a as $}from"./027_02-2-2a4a0246.js";import{_ as F}from"./QueryTable-acb810f9.js";import{u as I,l as m,m as q,o as l,c as h,d as t,f as u,n as c,p as g,F as w,k as p,b as y}from"./index-55faa955.js";import"./11_08-ed8f2ac7.js";const x={key:0},E=y("td",{style:{"line-height":"0"}},[y("img",{src:$,width:"800",height:"49"})],-1),L=[E],G={__name:"search",setup(M){const i=I(),a=m(1),f=m([]),s=m([]),r=m([]),d=m({});function v(e){let n={year:e.year,branchCity:e.branchCity,branchCityArea:e.branchCityArea,brancName:e.branchName};p.post("/api/form/uncloses",n).then(o=>{o&&o.length>=1?(f.value=o,a.value++):alert("尚無資料")}).catch(o=>{console.log("err",o)})}function b(e){p.get("/api/form/get",{params:{formId:e}}).then(async n=>{s.value=n,r.value=[],r.value=await i.getImgDataArray(n),r.value.length===n.proof.length&&a.value++})}function k(e){if(e&&e.length){s.value=e[0],r.value=e[1],a.value++;let n={params:{formId:e[0].id}};p.get("/api/form/getStatusBtn",n).then(o=>{d.value=o})}else a.value--}function V(e){a.value=a.value+e}return q(()=>i.stepValue,e=>{e==1&&(a.value=e),i.stepValue=0}),(e,n)=>{const o=F,P=T,D=B,S=A,C=N;return l(),h(w,null,[t(a)==1?(l(),h("tr",x,L)):u("",!0),t(a)==1?(l(),c(o,{key:1,onParser:v,queryMode:!0})):u("",!0),t(a)==2?(l(),c(P,{key:2,modelValue:t(f),onParser:b},null,8,["modelValue"])):u("",!0),t(a)===3?(l(),c(D,{key:3,onParser:k,modelValue:t(s),"onUpdate:modelValue":n[0]||(n[0]=_=>g(s)?s.value=_:null),imgData:t(r)},null,8,["modelValue","imgData"])):u("",!0),t(a)===4?(l(),c(S,{key:4,onParser:V,modelValue:t(s),"onUpdate:modelValue":n[1]||(n[1]=_=>g(s)?s.value=_:null),imgData:t(r),btnStatus:t(d)},null,8,["modelValue","imgData","btnStatus"])):u("",!0),t(a)===5?(l(),c(C,{key:5,state:t(s).status},null,8,["state"])):u("",!0)],64)}}};export{G as default};
